for(var w="function"==typeof Object.defineProperties?Object.defineProperty:function(e,a,b){e!=Array.prototype&&e!=Object.prototype&&(e[a]=b.value)},A="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,B=["Array","prototype","fill"],C=0;C<B.length-1;C++){var D=B[C];D in A||(A[D]={});A=A[D]}
var E=B[B.length-1],G=A[E],K=G?G:function(e,a,b){var d=this.length||0;0>a&&(a=Math.max(0,d+a));if(null==b||b>d)b=d;b=Number(b);0>b&&(b=Math.max(0,d+b));for(a=Number(a||0);a<b;a++)this[a]=e;return this};K!=G&&null!=K&&w(A,E,{configurable:!0,writable:!0,value:K});
(function(e){function a(d){if(b[d])return b[d].a;var c=b[d]={m:d,f:!1,a:{}};e[d].call(c.a,c,c.a,a);c.f=!0;return c.a}var b={};a.l=e;a.h=b;a.b=function(d,b){a.c(d)||Object.defineProperty(d,"a",{configurable:!1,enumerable:!0,get:b})};a.i=function(b){var d=b&&b.g?function(){return b["default"]}:function(){return b};a.b(d,d);return d};a.c=function(a){return Object.prototype.hasOwnProperty.call(a,"a")};a.j="";return a(a.o=0)})([function(){window.exportPng=function(){var a="<iframe width='100%' height='100%' src='"+
document.getElementById("paintlayer").toDataURL("image/png")+"'></iframe>",b=window.open();b.document.open();b.document.write(a);b.document.close()};var e="hardBrush";window.liveBrush=!1;window.setBrush=function(a,b){window.activateBrush(a,b)};window.brushes={softBrush:function(a,b,d,c){a.filter="blur(1.5px)";a.clearRect(0,0,c.width,c.height);a.beginPath();a.arc(d,d,b,0,2*Math.PI);a.fill()},hardBrush:function(a,b,d,c){a.filter="none";a.clearRect(0,0,c.width,c.height);a.beginPath();a.arc(d,d,b,0,2*
Math.PI);a.fill()},dotBrush:function(a,b,d,c){a.filter="none";a.clearRect(0,0,c.width,c.height);for(c=0;c<5*b;c++)a.beginPath(),a.arc(d+2*Math.random()*b-b,d+2*Math.random()*b-b,.5,0,2*Math.PI),a.fill()},calligraphyBrush:function(a,b,d,c){a.filter="none";a.clearRect(0,0,c.width,c.height);a.beginPath();a.lineWidth=b/2;window.liveBrush&&(c=Math.random()%360-180,a.rotate(c));b/=2;a.strokeStyle=a.fillStyle;a.moveTo(d-b,d-b);a.lineTo(d+b,d+b);a.stroke()}};window.main=function(){function a(){c&&c();if(0>
H--){H=100;var b=document.getElementById("overview");b.getContext("2d").drawImage(document.getElementById("paintlayer"),0,0,b.width,b.height)}window.requestAnimationFrame(a)}function b(){for(var a=0,b,d=I||0,k=255/f.width,c=255/f.height,z=t.getImageData(0,0,f.width,f.height),g=0;g<f.height;g++){for(var e=b=0;e<f.width;e++){var h=4*(e+g*f.width);z.data[h++]=a;z.data[h++]=b+=k;z.data[h++]=d;z.data[h++]=255}a+=c}t.putImageData(z,0,0)}function d(a,b){b||u?(u=v.fillStyle=b||u,F="source-over"):v.fillStyle=
"black";a||(a=document.getElementById("brushSize").value);window.brushes[e](v,a,64,x);document.getElementById("brushSizeText").innerText=a+" px"}var c=null,H=100;a();var u="black",F="source-over",p=!1,g=document.getElementById("paintlayer"),y=document.getElementById("overview"),x=document.getElementById("brush"),f=document.getElementById("colorPalette"),t=f.getContext("2d"),v=x.getContext("2d"),J=window.innerHeight/window.innerWidth;y.style.width="200px";y.style.height=parseInt(200*J)+"px";y.width=
200;y.height=parseInt(200*J);g.style.width=g.width=window.innerWidth;g.style.height=g.height=window.innerHeight;document.getElementById("brushSize").onmousemove=function(){d(document.getElementById("brushSize").value)};window.activateBrush=function(a,b){e=a;window.liveBrush=b;v.setTransform(1,0,0,1,0,0);d()};b();var q=!1;f.onmouseup=function(){q=!1};f.onmousemove=function(a){if(q){var b=f.offsetLeft,c=f.offsetTop,k=t.getImageData(0,0,f.width,f.height);a=4*(a.clientX-b+(a.clientY-c)*f.width);k="rgb("+
k.data[a++]+","+k.data[a++]+","+k.data[a++]+")";d(void 0,k)}};f.onmouseout=function(){q=!1};f.onmousedown=function(a){q=!0;var b=f.offsetLeft,c=f.offsetTop,k=t.getImageData(0,0,f.width,f.height);c=4*(a.clientX-b+(a.clientY-c)*f.width);a=k.data[c++];b=k.data[c++];k=k.data[c++];document.getElementById("rcslider").value=a;document.getElementById("gcslider").value=b;document.getElementById("bcslider").value=k;d(void 0,"rgb("+a+","+b+","+k+")")};document.getElementById("rcslider").onmousemove=document.getElementById("gcslider").onmousemove=
document.getElementById("bcslider").onmousemove=function(){d(void 0,"rgb("+document.getElementById("rcslider").value+","+document.getElementById("gcslider").value+","+document.getElementById("bcslider").value+")")};var I=0;document.getElementById("gslider").onmousemove=function(){I=document.getElementById("gslider").value;b()};d(13);var l=g.getContext("2d");l.globalCompositeOperation=F;l.globalAlpha=.1;g.onmousedown=function(a){l.globalCompositeOperation=F;if(!p){var b=g.offsetLeft+64,f=g.offsetTop+
64;r=h=a;l.drawImage(x,a.clientX-b,a.clientY-f);c=p=function(){if(r&&h){var a=r.clientX,c=h.clientX,e=r.clientY,n=h.clientY;if(a!=c||e!=n){var p=g.offsetLeft+64,t=g.offsetTop+64,v=!1;if(Math.abs(a-c)<Math.abs(e-n)){var m=a;a=e;e=m;m=c;c=n;n=m;v=!0}a>c&&(m=a,a=c,c=m,m=e,e=n,n=m);m=c-a;for(var y=2*Math.abs(n-e),q=0,u=e;a<=c;a++)!window.liveBrush||a%4||d(),v?l.drawImage(x,u-p,a-t):l.drawImage(x,a-p,u-t),q+=y,q>m&&(u+=n>e?1:-1,q-=2*m)}else a=l.globalAlpha,l.globalAlpha=.01,window.liveBrush&&d(),l.drawImage(x,
h.clientX-b+5*Math.random()-2.5,h.clientY-f+5*Math.random()-2.5),l.globalAlpha=a}r=h}}};document.getElementById("palette").onmouseover=g.onmouseup=function(){p&&(c=null);h=r=p=null};var r=null,h=null;g.onmousemove=function(a){p&&(r&&h||(h=r=a),h=a)}}}]);
